<% const fullName = (dbUser && dbUser.name) || (user && user.name && (user.name.first + ' ' + (user.name.last || ''))) || 'User'; const prettyRole = (role || activeRole || 'student').replace('_', ' '); const classesList = Array.isArray(classes) ? classes : []; const totalClasses = classesList.length; function countUniquePeople(classesArr, property) { const ids = new Set(); classesArr.forEach(c => { const list = c[property] || []; list.forEach(p => { if (p.cleverId) ids.add(p.cleverId); }); }); return ids.size; } const totalStudents = countUniquePeople(classesList, 'students'); const totalTeachers = countUniquePeople(classesList, 'teachers'); const hasMultipleRoles = Array.isArray(roles) && roles.length > 1; const schoolNames = (userSchools || []).map(s => s.name).join(', '); %>
Clever Demo â€“ Class Dashboard
Signed in as <%= fullName %>
Role:
<%= PrettyRole %>
<% if (schoolNames) { %>
Schools: <%= schoolNames %>
<% } %> <% if (hasMultipleRoles) { %> <% roles.forEach(function(r) { %>
<%= r.replace('_', ' ') %>
<% }); %> <% } %>
<% if (role === 'teacher') { %> Your Classes <% } else if (role === 'school_admin') { %> Classes at Your School <% } else if (role === 'district_admin') { %> District Classes Overview <% } else { %> Your Class Schedule <% } %>
<% if (role === 'teacher') { %> View the sections you teach and the students enrolled in each class. <% } else if (role === 'school_admin') { %> Browse all sections at your school(s), with a quick view of teachers and students. <% } else if (role === 'district_admin') { %> High-level view of all sections across the district, including rosters. <% } else { %> See your classes and who is teaching them. <% } %>
ğŸ“š
<%= totalClasses %> class<%= totalClasses === 1 ? '' : 'es' %>
<% if (role === 'teacher' || role === 'school_admin' || role === 'district_admin') { %>
ğŸ‘©â€ğŸ“
<%= totalStudents %> unique student<%= totalStudents === 1 ? '' : 's' %>
<% } %> <% if (role === 'school_admin' || role === 'district_admin' || role === 'student') { %>
ğŸ‘©â€ğŸ«
<%= totalTeachers %> unique teacher<%= totalTeachers === 1 ? '' : 's' %>
<% } %> <% if (classesList.length === 0) { %>
No classes found for this role.
<% if (role === 'teacher') { %>
It looks like youâ€™re not currently assigned to any sections as a teacher in this demo roster.
<% } else if (role === 'school_admin') { %>
We donâ€™t see any sections for your school(s) in the synced data yet.
<% } else if (role === 'district_admin') { %>
No sections were found in the synced Clever data. Try running a sync from the Admin Dashboard.
<% } else { %>
We couldnâ€™t find any sections for you as a student in this demo roster.
<% } %>
<% } else { %> <% classesList.forEach(function(cls) { const students = cls.students || []; const teachers = cls.teachers || []; %>
<%= cls.name || 'Untitled Section' %>
<% if (cls.schoolName) { %>
<%= cls.schoolName %>
<% } else if (cls.schoolId) { %>
School ID: <%= cls.schoolId %>
<% } %>
<% if (students.length && (role === 'teacher' || role === 'school_admin' || role === 'district_admin')) { %>
<%= students.length %> student<%= students.length === 1 ? '' : 's' %>
<% } %> <% if (teachers.length && (role === 'student' || role === 'school_admin' || role === 'district_admin')) { %>
<%= teachers.length %> teacher<%= teachers.length === 1 ? '' : 's' %>
<% } %> <% if (role === 'teacher' || role === 'school_admin' || role === 'district_admin') { %> <% if (students.length) { %>
Students
	â€¢	<% students.forEach(function(s) { %>
	â€¢	<%= s.name %> (<%= s.email || 'no email' %>)
	â€¢	<% }); %>
<% } %> <% } %> <% if (role === 'student' || role === 'school_admin' || role === 'district_admin') { %> <% if (teachers.length) { %>
Teachers
	â€¢	<% teachers.forEach(function(t) { %>
	â€¢	<%= t.name %> (<%= t.email || 'no email' %>)
	â€¢	<% }); %>
<% } %> <% } %> <% }); %> <% } %>
